#!/bin/sh

#From: "Grigoriy Strokin" <grg@philol.msu.ru>
#Newsgroups: comp.unix.shell
#Subject: fast basename and dirname functions for BASH/SH
#Date: Sat, 27 Dec 1997 21:18:40 +0300
#
#Please send your comments to grg@philol.msu.ru

function myname()
{
  local name="${1##*/}"
  echo "${name%$2}"
}

function dirname()
{
  local dir="${1%${1##*/}}"
  [ "${dir:=./}" != "/" ] && dir="${dir%?}"
  echo "$dir"
}

# Two additional functions:
# 1) namename prints the basename without extension
# 2) ext prints extension of a file, including "."

function namename()
{
  local name=${1##*/}
  local name0="${name%.*}"
  echo "${name0:-$name}"
}
function ext()
{
  local name=${1##*/}
  local name0="${name%.*}"
  local ext=${name0:+${name#$name0}}
  echo "${ext:-.}"
}

catm () {
# cat/zcat/bzcat multiple files
local TMPFILE=/tmp/catm.tmp
    echo>$TMPFILE
    for i in "$@"; do
    if [ -f $i ]; then
	iext=`ext $i`
#	isGZ=`echo $i | grep '.gz$' | wc -l`
#	if [ "$isGZ" != "0" ]; then
	if [ "$iext" == ".gz" ]; then
            zcat $i	>> $TMPFILE
        else
#            isBZ=`echo $i | grep '.bz2$' | wc -l`	
#            if [ "$isBZ" != "0" ]; then
		if [ "$iext" == ".bz2" ]; then
	        bzcat $i	>> $TMPFILE
            else
	        cat $i	>> $TMPFILE
	    fi
        fi
    fi
    done;
    cat $TMPFILE
    rm -f $TMPFILE
}
