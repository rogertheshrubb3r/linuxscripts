#!/bin/sh

DBG=



catm () {
# cat/zcat/bzcat multiple files
#local TMPFILE=/tmp/catm.tmp
local TMPFILE=`mktemp -t catm.XXXXXX`  || local TMPFILE=/tmp/catm.tmp



  sorttype="tr" # by time, reverse
  echo>$TMPFILE
  for f in "$@"; do allfiles="$allfiles $f"; done
  filelist=`ls -1 -$sortttype $allfiles` # list of files

  for i in $filelist; do
    [ $DBG ] && echo "processing: $i"
    isGZ=`echo $i | grep '.gz$' | wc -l`
    [ $DBG ] && echo "i=$i; isGZ: $isGZ"
    if [ "$isGZ" != "0" ]; then
        zcat $i	>> $TMPFILE
    else
        isBZ=`echo $i | grep '.bz2$' | wc -l`	
        if [ "$isBZ" != "0" ]; then
	    bzcat $i	>> $TMPFILE
        else
	    cat $i	>> $TMPFILE
	fi
    fi
  done;
  cat $TMPFILE
  rm $TMPFILE
}

catm b.gz a b.gz
