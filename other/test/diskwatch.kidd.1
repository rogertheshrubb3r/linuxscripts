#!/bin/bash

mailfrom=diskwatch
mailto=root

# percent limit
limit=90

system=`hostname --fqdn`

for line in `df -aPh | grep "^/" | sort | awk '{print $6" "$5" "$4}'`; do
percent=`echo "$line" | awk -F - '{print$2}' | cut -d % -f 1`
partition=`echo "$line" | awk -F - '{print$1}' | cut -d % -f 1`



if [ $partition == '/cdrom' ]; then
limit=101
fi

if [ $percent -ge $limit ]; then
echo "Free Space warning!" | mail -a "From: $mailfrom" -s "[$system] $line" $mailto
fi
done 
